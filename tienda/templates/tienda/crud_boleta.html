{% extends 'tienda/base.html' %}
{% load static %}
{% block content %}
<h1 class="my-4">Compras en la tienda</h1>
<div class="table-contenedor">
<table class="table table-hover tabla-crud">
    <thead>
      <tr>
        <th scope="col">Id</th>
        <th scope="col">Cliente</th>
        <th scope="col">Nro Productos</th>
        <th scope="col">Fecha</th>
        <th scope="col">Monto</th>
        <th scope="col">Acciones</th>
      </tr>
    </thead>
    <tbody>
        {% for ped in pagina.object_list %}
            <tr>
              <th scope="row">{{ped.id}}</th>
              <td>{{ped.f_cliente.user.username}}</td>
              <td>{{ped.nro_productos}}</td>
              <td>{{ped.fecha_compra}}</td>
              <td>${{ped.total_precio}}</td>
              <form method="POST">
                {% csrf_token %}
                <td><button type="submit" value="{{ped.id}}" name="id_boton" class="btn btn-crud">Revisar</button></td>
              </form>
            </tr>
        {% endfor %}
    </tbody>
  </table>
</div>

<div class="container">
  <div class="row my-5">
      <p>Página: {{pagina.number}}/{{pagina.paginator.num_pages}}</p>
      <div class="col-md-4 offset-md-3">
          <nav aria-label="...">
              <ul class="pagination">
                  <li class="page-item">
                      {% if pagina.has_previous %}
                          <a class="page-link" href="{% url 'crud_b' %}?pagina={{pagina.previous_page_number}}">Anterior</a>
                      {% endif %}
                  </li>
                  
                  {% for num_page in pagina.paginator.page_range %}
                  <br /> 
                      {% if pagina.number == num_page %}
                          <li class="page-item active" aria-current="page">
                              <a class="page-link" href="{% url 'crud_b' %}?pagina={{num_page}}">{{num_page}}</a>
                          </li>
                      {% else %}
                          <li class="page-item" aria-current="page">
                              <a class="page-link" href="{% url 'crud_b' %}?pagina={{num_page}}">{{num_page}}</a>
                          </li>
                      {% endif %}
                  <br />
                  {% endfor %}

                  <li class="page-item">
                      {% if pagina.has_next %}
                          <a class="page-link" href="{% url 'crud_b' %}?pagina={{pagina.next_page_number}}">Siguiente</a>
                      {% endif %}
                  </li>
              </ul>
          </nav>
      </div>
  </div>
</div>
{% endblock %}

<!--

Para ir a una página manualmente, en el URL sebe agregar "?pagina=" y al lado debe ser el número de la página
Ejemplo: /tienda/crud_b?pagina=2

-->